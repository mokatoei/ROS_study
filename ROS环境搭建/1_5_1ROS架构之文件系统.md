## **ğŸ“‚ ROS æ–‡ä»¶ç³»ç»Ÿä¸è®¡ç®—å›¾è§£æ**  

ROS ç”±**æ–‡ä»¶ç³»ç»Ÿï¼ˆFilesystemï¼‰**å’Œ**è®¡ç®—å›¾ï¼ˆComputation Graphï¼‰**ä¸¤ä¸ªæ ¸å¿ƒæ¦‚å¿µç»„æˆï¼Œå®ƒä»¬åˆ†åˆ«è´Ÿè´£**ç»„ç»‡ ROS ä»£ç å’Œæ•°æ®**ä»¥åŠ**ç®¡ç† ROS è¿è¡Œæ—¶çš„é€šä¿¡**ã€‚

---

## **ğŸ“‚ ROS æ–‡ä»¶ç³»ç»Ÿç»“æ„è¯¦è§£**  

åœ¨ ROSï¼ˆRobot Operating Systemï¼‰ä¸­ï¼Œ**æ–‡ä»¶ç³»ç»Ÿï¼ˆFilesystemï¼‰** ä¸»è¦ç”¨äº**ç»„ç»‡ä»£ç ã€ç®¡ç†èµ„æºå’Œå®šä¹‰ä¾èµ–å…³ç³»**ã€‚ç†è§£ ROS æ–‡ä»¶ç³»ç»Ÿç»“æ„å¯¹äºç¼–å†™ã€ç¼–è¯‘å’Œè¿è¡Œ ROS é¡¹ç›®è‡³å…³é‡è¦ã€‚  

---

# **1ï¸âƒ£ ROS å·¥ä½œç©ºé—´ï¼ˆWorkspaceï¼‰**
ROS **å·¥ä½œç©ºé—´ï¼ˆWorkspaceï¼‰** æ˜¯æ‰€æœ‰ ROS å¼€å‘çš„åŸºç¡€ã€‚å®ƒç±»ä¼¼äºä¸€ä¸ªé¡¹ç›®ç›®å½•ï¼Œé‡Œé¢å­˜æ”¾ç€å¤šä¸ª ROS åŒ…ã€‚  

### **ğŸ“Œ å…¸å‹çš„ ROS å·¥ä½œç©ºé—´ç›®å½•ç»“æ„**
```bash
~/ros_ws/                    # ä½ çš„ ROS å·¥ä½œç©ºé—´
 â”œâ”€â”€ src/                    # æºä»£ç ç›®å½•ï¼Œå­˜æ”¾æ‰€æœ‰ ROS åŒ…
 â”‚   â”œâ”€â”€ my_robot_pkg/       # ä¸€ä¸ª ROS åŒ…
 â”‚   â”‚   â”œâ”€â”€ CMakeLists.txt  # C++ ä»£ç çš„ CMake æ„å»ºæ–‡ä»¶
 â”‚   â”‚   â”œâ”€â”€ package.xml     # åŒ…çš„å…ƒæ•°æ®
 â”‚   â”‚   â”œâ”€â”€ launch/         # å­˜æ”¾ launch å¯åŠ¨æ–‡ä»¶
 â”‚   â”‚   â”œâ”€â”€ scripts/        # å­˜æ”¾ Python è„šæœ¬
 â”‚   â”‚   â”œâ”€â”€ msg/            # å­˜æ”¾è‡ªå®šä¹‰æ¶ˆæ¯
 â”‚   â”‚   â”œâ”€â”€ srv/            # å­˜æ”¾è‡ªå®šä¹‰æœåŠ¡
 â”‚   â”‚   â”œâ”€â”€ include/        # C++ å¤´æ–‡ä»¶
 â”‚   â”‚   â”œâ”€â”€ src/            # C++ æºä»£ç 
 â”œâ”€â”€ build/                  # ç¼–è¯‘æ—¶ç”Ÿæˆçš„ä¸´æ—¶æ–‡ä»¶
 â”œâ”€â”€ devel/                  # ç¼–è¯‘åçš„äºŒè¿›åˆ¶æ–‡ä»¶
 â”œâ”€â”€ install/                # å®‰è£…åçš„æ–‡ä»¶
```

---

# **2ï¸âƒ£ ROS ä¸»è¦ç›®å½•è§£æ**
## **ğŸ”¹ 1. `src/` - æºä»£ç ç›®å½•**
æ‰€æœ‰ ROS åŒ…ï¼ˆPackagesï¼‰éƒ½å­˜æ”¾åœ¨ `src/` ç›®å½•ä¸­ï¼Œæ¯ä¸ª ROS åŒ…éƒ½åŒ…å«ä»£ç ã€é…ç½®å’Œç›¸å…³èµ„æºã€‚  
**å‘½ä»¤**ï¼š
```bash
cd ~/ros_ws/src
catkin_create_pkg my_robot_pkg std_msgs rospy
```

---

## **ğŸ”¹ 2. `package.xml` - ROS åŒ…çš„å…ƒæ•°æ®**
æ¯ä¸ª ROS åŒ…éƒ½æœ‰ `package.xml` æ–‡ä»¶ï¼Œå®ƒå®šä¹‰äº†ï¼š
- **åŒ…çš„åç§°**
- **ä¾èµ–å…³ç³»**
- **ç‰ˆæœ¬**
- **ä½œè€…ä¿¡æ¯**
  
**ç¤ºä¾‹ `package.xml`**ï¼š
```xml
<package format="2">
  <name>my_robot_pkg</name>
  <version>0.0.1</version>
  <description>My first ROS package</description>

  <maintainer email="user@example.com">Your Name</maintainer>
  <license>MIT</license>

  <!-- ä¾èµ–é¡¹ -->
  <depend>roscpp</depend>
  <depend>rospy</depend>
  <depend>std_msgs</depend>
</package>
```
**é‡è¦å‘½ä»¤**ï¼š
```bash
roscd my_robot_pkg  # è¿›å…¥åŒ…ç›®å½•
rospack list        # æŸ¥çœ‹æ‰€æœ‰ROSåŒ…
rospack depends my_robot_pkg  # æŸ¥çœ‹ä¾èµ–é¡¹
```

---

## **ğŸ”¹ 3. `CMakeLists.txt` - C++ ä»£ç çš„ç¼–è¯‘é…ç½®**
å¦‚æœä½ çš„åŒ…åŒ…å« C++ ä»£ç ï¼Œåˆ™éœ€è¦ `CMakeLists.txt` è¿›è¡Œç¼–è¯‘é…ç½®ã€‚  
**ç¤ºä¾‹ `CMakeLists.txt`**ï¼š
```cmake
cmake_minimum_required(VERSION 3.0.2)
project(my_robot_pkg)

find_package(catkin REQUIRED COMPONENTS roscpp std_msgs)

catkin_package()

include_directories(${catkin_INCLUDE_DIRS})

add_executable(my_node src/my_node.cpp)
target_link_libraries(my_node ${catkin_LIBRARIES})
```
**ç¼–è¯‘ C++ ä»£ç **ï¼š
```bash
cd ~/ros_ws
catkin_make
```

---

## **ğŸ”¹ 4. `launch/` - å¯åŠ¨æ–‡ä»¶ç›®å½•**
`launch/` ç›®å½•å­˜æ”¾ `.launch` æ–‡ä»¶ï¼Œç”¨äºåŒæ—¶å¯åŠ¨å¤šä¸ª ROS èŠ‚ç‚¹ã€‚  
**ç¤ºä¾‹ `my_robot.launch`**ï¼š
```xml
<launch>
  <node name="talker" pkg="my_robot_pkg" type="talker.py" output="screen"/>
  <node name="listener" pkg="my_robot_pkg" type="listener.py" output="screen"/>
</launch>
```
**è¿è¡Œ Launch æ–‡ä»¶**ï¼š
```bash
roslaunch my_robot_pkg my_robot.launch
```

---

## **ğŸ”¹ 5. `scripts/` - Python è„šæœ¬ç›®å½•**
å­˜æ”¾ Python ä»£ç çš„ç›®å½•ï¼Œè„šæœ¬éœ€è¦åŠ **æ‰§è¡Œæƒé™**ï¼š
```bash
chmod +x scripts/talker.py
rosrun my_robot_pkg talker.py
```
**ç¤ºä¾‹ `talker.py`**ï¼š
```python
#!/usr/bin/env python3
import rospy
from std_msgs.msg import String

rospy.init_node('talker')
pub = rospy.Publisher('/chatter', String, queue_size=10)
rate = rospy.Rate(10)

while not rospy.is_shutdown():
    pub.publish("Hello ROS!")
    rate.sleep()
```

---

## **ğŸ”¹ 6. `msg/` - è‡ªå®šä¹‰æ¶ˆæ¯ç›®å½•**
å¦‚æœä½ çš„ ROS èŠ‚ç‚¹éœ€è¦**è‡ªå®šä¹‰æ¶ˆæ¯æ ¼å¼**ï¼Œå®ƒä»¬å­˜æ”¾åœ¨ `msg/` ç›®å½•ä¸‹ã€‚  
**ç¤ºä¾‹ `Person.msg`**ï¼š
```plaintext
string name
int32 age
float32 height
```
**é…ç½® `CMakeLists.txt`**ï¼š
```cmake
add_message_files(
  FILES
  Person.msg
)

generate_messages(
  DEPENDENCIES
  std_msgs
)
```

**ç¼–è¯‘åå³å¯ä½¿ç”¨**ï¼š
```bash
source devel/setup.bash
rosmsg show my_robot_pkg/Person
```

---

## **ğŸ”¹ 7. `srv/` - è‡ªå®šä¹‰æœåŠ¡ç›®å½•**
ç”¨äºå­˜æ”¾è‡ªå®šä¹‰çš„ **æœåŠ¡**ï¼ˆServiceï¼‰ã€‚  
**ç¤ºä¾‹ `AddTwoInts.srv`**ï¼š
```plaintext
int64 a
int64 b
---
int64 sum
```
**ä¿®æ”¹ `CMakeLists.txt`**ï¼š
```cmake
add_service_files(
  FILES
  AddTwoInts.srv
)
```
ç„¶åç¼–è¯‘å¹¶ä½¿ç”¨ï¼š
```bash
roscd my_robot_pkg/srv
rossrv show my_robot_pkg/AddTwoInts
```

---

# **3ï¸âƒ£ å…¶ä»– ROS ç›®å½•**
## **ğŸ”¹ 1. `build/` - ç¼–è¯‘ç›®å½•**
å½“ä½ è¿è¡Œ `catkin_make` æ—¶ï¼ŒROS ä¼šåœ¨ `build/` ç›®å½•ä¸­ç”Ÿæˆç¼–è¯‘æ–‡ä»¶ã€‚
```bash
rm -rf build/  # åˆ é™¤ç¼–è¯‘ç¼“å­˜
catkin_make    # é‡æ–°ç¼–è¯‘
```

---

## **ğŸ”¹ 2. `devel/` - ç¼–è¯‘åçš„å¼€å‘ç¯å¢ƒ**
`devel/` ç›®å½•å­˜æ”¾äº†ç¼–è¯‘åçš„å¯æ‰§è¡Œæ–‡ä»¶å’Œå¼€å‘ç¯å¢ƒã€‚  
**ä½¿ç”¨ `source` åŠ è½½ç¯å¢ƒ**ï¼š
```bash
source devel/setup.bash
rosrun my_robot_pkg my_node
```

---

## **ğŸ”¹ 3. `install/` - å®‰è£…åçš„æ–‡ä»¶**
å¦‚æœä½ è¿è¡Œï¼š
```bash
catkin_make install
```
ROS ä¼šæŠŠç¼–è¯‘åçš„æ–‡ä»¶å®‰è£…åˆ° `install/` ç›®å½•ä¸­ã€‚  

---

# **ğŸ¯ æ€»ç»“**
| **ç›®å½•** | **ä½œç”¨** |
|---------|--------|
| **src/** | å­˜æ”¾ ROS åŒ… |
| **package.xml** | å®šä¹‰åŒ…çš„å…ƒä¿¡æ¯ |
| **CMakeLists.txt** | C++ ä»£ç ç¼–è¯‘é…ç½® |
| **launch/** | å¯åŠ¨æ–‡ä»¶ |
| **scripts/** | Python è„šæœ¬ |
| **msg/** | è‡ªå®šä¹‰æ¶ˆæ¯æ ¼å¼ |
| **srv/** | è‡ªå®šä¹‰æœåŠ¡æ ¼å¼ |
| **build/** | ç¼–è¯‘ç¼“å­˜ |
| **devel/** | ç¼–è¯‘åçš„äºŒè¿›åˆ¶æ–‡ä»¶ |
| **install/** | å®‰è£…åçš„å¯æ‰§è¡Œæ–‡ä»¶ |

ğŸ’¡ **ğŸš€ ç»ƒä¹ å»ºè®®**ï¼š
1. åˆ›å»ºè‡ªå·±çš„ ROS åŒ… `my_robot_pkg`
2. æ·»åŠ  `msg/`ã€`srv/`ã€`scripts/` ç›®å½•å¹¶ç¼–å†™ Python ä»£ç 
3. ç¼–è¯‘ã€è¿è¡Œå¹¶æµ‹è¯•ä½ çš„ ROS è®¡ç®—å›¾ ğŸ¯
---

# **ğŸ“Œ 2. ROS è®¡ç®—å›¾ï¼ˆComputation Graphï¼‰**
è®¡ç®—å›¾æ˜¯ ROS è¿è¡Œæ—¶çš„**æ ¸å¿ƒæ¶æ„**ï¼Œç”¨äºç®¡ç†**èŠ‚ç‚¹é—´çš„é€šä¿¡**ã€‚å®ƒä¸»è¦ç”±ä»¥ä¸‹ç»„ä»¶ç»„æˆï¼š

| **ç»„ä»¶** | **ä½œç”¨** |
|---------|--------|
| **Nodeï¼ˆèŠ‚ç‚¹ï¼‰** | è¿è¡Œçš„ ROS è¿›ç¨‹ |
| **Masterï¼ˆä¸»èŠ‚ç‚¹ï¼‰** | è´Ÿè´£èŠ‚ç‚¹å‘ç°å’Œç®¡ç† |
| **Topicï¼ˆè¯é¢˜ï¼‰** | è´Ÿè´£å‘å¸ƒ-è®¢é˜…æ¶ˆæ¯ä¼ è¾“ |
| **Messageï¼ˆæ¶ˆæ¯ï¼‰** | è¯é¢˜ä¼ è¾“çš„æ•°æ®æ ¼å¼ |
| **Serviceï¼ˆæœåŠ¡ï¼‰** | è¯·æ±‚-å“åº”é€šä¿¡æ¨¡å‹ |
| **Actionï¼ˆåŠ¨ä½œï¼‰** | ç”¨äºé•¿æ—¶é—´æ‰§è¡Œçš„ä»»åŠ¡ |
| **Parameter Serverï¼ˆå‚æ•°æœåŠ¡å™¨ï¼‰** | å­˜å‚¨å…¨å±€å‚æ•° |

### **ğŸ“Š è®¡ç®—å›¾ç¤ºæ„**
```plaintext
+-----------------+     +------------------+
|  /talker (Node) | --> |  /chatter (Topic) | --> | /listener (Node) |
+-----------------+     +------------------+     +-----------------+
```
è¿™é‡Œï¼š
- **`/talker`** é€šè¿‡**è¯é¢˜ `/chatter`** å‘é€æ¶ˆæ¯
- **`/listener`** è®¢é˜…**`/chatter`** å¹¶æ¥æ”¶æ¶ˆæ¯

---

## **ğŸ” è®¡ç®—å›¾ä¸æ–‡ä»¶ç³»ç»Ÿçš„å…³ç³»**
| **ç±»åˆ«** | **ä½œç”¨** | **å‘½ä»¤ç¤ºä¾‹** |
|---------|--------|--------------|
| **æ–‡ä»¶ç³»ç»Ÿ** | ç»„ç»‡ä»£ç  | `catkin_create_pkg` |
| **è®¡ç®—å›¾** | è¿è¡Œæ—¶ç®¡ç†èŠ‚ç‚¹é€šä¿¡ | `rosrun` / `roslaunch` |

---

## **å®éªŒ**
### **1ï¸âƒ£ åˆ›å»ºä¸€ä¸ª ROS åŒ…**
```bash
cd ~/ros_ws/src
catkin_create_pkg my_pkg std_msgs rospy
cd ~/ros_ws
catkin_make
source devel/setup.bash
```

### **2ï¸âƒ£ è¿è¡Œ ROS è®¡ç®—å›¾**
```bash
roscore  # å¯åŠ¨ ROS Master
rosrun turtlesim turtlesim_node  # è¿è¡ŒèŠ‚ç‚¹
rosrun turtlesim turtle_teleop_key  # å¦ä¸€ä¸ªèŠ‚ç‚¹æ§åˆ¶ä¹Œé¾Ÿ
```
ç„¶åç”¨ï¼š
```bash
rosnode list  # æŸ¥çœ‹æ‰€æœ‰èŠ‚ç‚¹
rostopic list  # æŸ¥çœ‹æ‰€æœ‰è¯é¢˜
```
å°±èƒ½çœ‹åˆ°è®¡ç®—å›¾çš„ç»“æ„äº†ã€‚

---

## **ğŸ¯ æ€»ç»“**
- **æ–‡ä»¶ç³»ç»Ÿï¼ˆFilesystemï¼‰**ï¼šç®¡ç† ROS **ä»£ç å’Œèµ„æº**
- **è®¡ç®—å›¾ï¼ˆComputation Graphï¼‰**ï¼šç®¡ç† **ROS è¿è¡Œæ—¶çš„èŠ‚ç‚¹é€šä¿¡**
- **äºŒè€…å…³ç³»**ï¼š**æ–‡ä»¶ç³»ç»Ÿç»„ç»‡ä»£ç ï¼Œè®¡ç®—å›¾è´Ÿè´£è¿è¡Œ** 
