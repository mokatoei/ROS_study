# åŸºç¡€æ¡ˆä¾‹å®ç°
## éœ€æ±‚
ç¼–å†™å‘å¸ƒè®¢é˜…å®ç°ï¼Œè¦æ±‚å‘å¸ƒæ–¹ä»¥10HZï¼ˆæ¯ç§’åæ¬¡ï¼‰çš„é¢‘ç‡å‘å¸ƒæ–‡æœ¬æ¶ˆæ¯ï¼Œè®¢é˜…æ–¹è®¢é˜…æ¶ˆæ¯å¹¶å°†æ¶ˆæ¯å†…å®¹æ‰“å°è¾“å‡ºï¼Œ

## åˆ†æ 
åŸºäº2.1.2å¯çŸ¥ï¼Œå…·ä½“çš„ç†è®ºé€»è¾‘å¤§éƒ¨åˆ†å·²ç»è¢«å°è£…å®Œæ¯•ï¼Œéœ€è¦å…³æ³¨çš„å…³é”®ç‚¹è¿˜æœ‰ä»¥ä¸‹ä¸‰ä¸ªæ–¹é¢ã€‚

- å‘å¸ƒæ–¹
- æ¥æ”¶æ–¹
- ä¼ é€’æ•°æ®

å…·ä½“çš„å®ç°æµç¨‹ä¸ºï¼š
1. ç¼–å†™å‘å¸ƒæ–¹å®ç°
2. ç¼–å†™è®¢é˜…æ–¹å®ç°
3. ç¼–è¯‘é…ç½®æ–‡ä»¶
4. ç¼–è¯‘å¹¶æ‰§è¡Œ

## å‘å¸ƒæ–¹å®ç°æ¡†æ¶ï¼ˆC++ï¼‰
åœ¨ ROSï¼ˆRobot Operating Systemï¼‰ä¸­ï¼Œ**å‘å¸ƒè€…ï¼ˆPublisherï¼‰** ç”¨äºåœ¨**è¯é¢˜ï¼ˆTopicï¼‰** ä¸Šå‘å¸ƒæ¶ˆæ¯ï¼Œä¾›è®¢é˜…è€…ï¼ˆSubscriberï¼‰æ¥æ”¶ã€‚ä¸‹é¢æ˜¯ **C++** å’Œ **Python** ç‰ˆæœ¬çš„å‘å¸ƒè€…å®ç°æ¡†æ¶ï¼Œå¹¶è¯¦ç»†è§£é‡Šå…¶ä¸­çš„æ¯ä¸ªå‡½æ•°ã€‚
å¤§è‡´å¯ä»¥åˆ’åˆ†ä¸ºä»¥ä¸‹å‡ æ­¥ï¼š
1. åŒ…å«å¤´æ–‡ä»¶
2. åˆå§‹åŒ–ROSèŠ‚ç‚¹
3. åˆ›å»ºèŠ‚ç‚¹å¥æŸ„
4. åˆ›å»ºå‘å¸ƒè€…å¯¹è±¡
5. ç¼–å†™å‘å¸ƒé€»è¾‘å¹¶å‘å¸ƒæ•°æ®

---

## **ğŸ”¹ 1. C++ ç‰ˆå‘å¸ƒè€…ï¼ˆPublisherï¼‰**
C++ ä»£ç é€šå¸¸æ”¾åœ¨ `src` ç›®å½•ä¸‹ï¼Œæ¯”å¦‚ `src/talker.cpp`ã€‚

### **ğŸ“Œ C++ ä»£ç ç¤ºä¾‹**
```cpp
#include "ros/ros.h"
#include "std_msgs/String.h"

int main(int argc, char **argv)
{
    // 1ï¸âƒ£ åˆå§‹åŒ– ROS èŠ‚ç‚¹
    ros::init(argc, argv, "talker");

    // 2ï¸âƒ£ åˆ›å»ºèŠ‚ç‚¹å¥æŸ„
    ros::NodeHandle nh;

    // 3ï¸âƒ£ åˆ›å»ºå‘å¸ƒè€…å¯¹è±¡
    ros::Publisher chatter_pub = nh.advertise<std_msgs::String>("chatter", 10);

    // 4ï¸âƒ£ è®¾å®šå‘å¸ƒé¢‘ç‡ï¼ˆ10Hzï¼‰
    ros::Rate loop_rate(10);

    // ç­‰å¾…æ³¨å†Œå®Œæˆ
    ros::Duration(3).sleep();

    int count = 0;
    while (ros::ok())  // 5ï¸âƒ£ ä¸»å¾ªç¯ï¼ŒæŒç»­å‘å¸ƒæ¶ˆæ¯
    {
        // 6ï¸âƒ£ åˆ›å»ºå¹¶å¡«å……æ¶ˆæ¯
        std_msgs::String msg;
        msg.data = "Hello, ROS! Count: " + std::to_string(count);

        // 7ï¸âƒ£ é€šè¿‡è¯é¢˜å‘å¸ƒæ¶ˆæ¯
        chatter_pub.publish(msg);

        ROS_INFO("Published: %s", msg.data.c_str());

        // 8ï¸âƒ£ ç­‰å¾…ä»¥ä¿æŒè®¾å®šçš„å‘å¸ƒé¢‘ç‡
        loop_rate.sleep();
        count++;
    }

    return 0;
}
```

---
## **ğŸ“Œ C++ å…³é”®å‡½æ•°è§£æ**
### **1ï¸âƒ£ `ros::init(argc, argv, "talker")`**
#### **ğŸ”¹ ä½œç”¨**
åˆå§‹åŒ– ROS èŠ‚ç‚¹ï¼Œ**å¿…é¡»åœ¨åˆ›å»º NodeHandle ä¹‹å‰è°ƒç”¨**ã€‚

#### **ğŸ”¹ å‚æ•°**
| **å‚æ•°**  | **ç±»å‹** | **è¯´æ˜** |
|-----------|---------|----------|
| `argc`    | `int`   | `main()` å‡½æ•°çš„å‘½ä»¤è¡Œå‚æ•°ä¸ªæ•° |
| `argv`    | `char**`| å‘½ä»¤è¡Œå‚æ•°åˆ—è¡¨ |
| `"talker"`| `std::string` | ROS èŠ‚ç‚¹åç§°ï¼Œå¿…é¡»å”¯ä¸€ |

---

### **2ï¸âƒ£ `ros::NodeHandle nh`**
#### **ğŸ”¹ ä½œç”¨**
åˆ›å»º **ROS å¥æŸ„**ï¼Œç”¨äºç®¡ç†èŠ‚ç‚¹çš„èµ„æºï¼Œä¾‹å¦‚ **è¯é¢˜**ã€**å‚æ•°æœåŠ¡å™¨**ã€**æœåŠ¡** ç­‰ã€‚

#### **ğŸ”¹ å‚æ•°**
æ— å‚æ•°ï¼Œåˆ›å»ºé»˜è®¤èŠ‚ç‚¹å¥æŸ„ã€‚

---

### **3ï¸âƒ£ `ros::Publisher chatter_pub = nh.advertise<std_msgs::String>("chatter", 10);`**
#### **ğŸ”¹ ä½œç”¨**
åˆ›å»º **å‘å¸ƒè€…ï¼ˆPublisherï¼‰**ï¼Œå‘å¸ƒ `std_msgs::String` ç±»å‹çš„æ¶ˆæ¯åˆ° `"chatter"` è¯é¢˜ã€‚

#### **ğŸ”¹ å‚æ•°**
| **å‚æ•°** | **ç±»å‹** | **è¯´æ˜** |
|----------|---------|----------|
| `"chatter"` | `std::string` | è¯é¢˜åç§°ï¼Œè®¢é˜…è€…éœ€è¦è®¢é˜…è¿™ä¸ªåç§°æ‰èƒ½æ”¶åˆ°æ¶ˆæ¯ |
| `10` | `int` | æ¶ˆæ¯é˜Ÿåˆ—å¤§å°ï¼Œç¼“å­˜ 10 æ¡æ¶ˆæ¯ï¼Œè¶…è¿‡åæ—§æ¶ˆæ¯ä¼šè¢«è¦†ç›– |

---

### **4ï¸âƒ£ `ros::Rate loop_rate(10);`**
#### **ğŸ”¹ ä½œç”¨**
åˆ›å»ºä¸€ä¸ª **å¾ªç¯é¢‘ç‡æ§åˆ¶å™¨**ï¼Œè¿™é‡Œè®¾ç½®ä¸º `10Hz`ï¼Œå³æ¯ç§’æ‰§è¡Œ **10 æ¬¡å¾ªç¯**ã€‚

#### **ğŸ”¹ å‚æ•°**
| **å‚æ•°** | **ç±»å‹** | **è¯´æ˜** |
|----------|---------|----------|
| `10` | `double` | ä»¥ 10Hz çš„é¢‘ç‡å¾ªç¯ |

---

### **5ï¸âƒ£ `while (ros::ok())`**
#### **ğŸ”¹ ä½œç”¨**
æ£€æŸ¥ **ROS æ˜¯å¦ä»åœ¨è¿è¡Œ**ã€‚å¦‚æœèŠ‚ç‚¹è¢«å…³é—­ï¼ˆå¦‚ `Ctrl+C`ï¼‰ï¼Œ`ros::ok()` ä¼šè¿”å› `false`ï¼Œé€€å‡ºå¾ªç¯ã€‚

---

### **6ï¸âƒ£ `std_msgs::String msg; msg.data = "Hello, ROS! Count: " + std::to_string(count);`**
#### **ğŸ”¹ ä½œç”¨**
åˆ›å»º `std_msgs::String` æ¶ˆæ¯ï¼Œå¹¶å¡«å…… `data` å­—æ®µã€‚

#### **ğŸ”¹ å‚æ•°**
| **å‚æ•°** | **ç±»å‹** | **è¯´æ˜** |
|----------|---------|----------|
| `msg.data` | `std::string` | éœ€è¦å‘å¸ƒçš„æ–‡æœ¬å†…å®¹ |

---

### **7ï¸âƒ£ `chatter_pub.publish(msg);`**
#### **ğŸ”¹ ä½œç”¨**
**é€šè¿‡è¯é¢˜å‘å¸ƒæ¶ˆæ¯**ï¼Œè®¢é˜…è¯¥è¯é¢˜çš„è®¢é˜…è€…ä¼šæ”¶åˆ°æ¶ˆæ¯ã€‚

#### **ğŸ”¹ å‚æ•°**
| **å‚æ•°** | **ç±»å‹** | **è¯´æ˜** |
|----------|---------|----------|
| `msg` | `std_msgs::String` | éœ€è¦å‘å¸ƒçš„æ¶ˆæ¯ |

---

### **8ï¸âƒ£ `ROS_INFO("Published: %s", msg.data.c_str());`**
#### **ğŸ”¹ ä½œç”¨**
åœ¨ç»ˆç«¯è¾“å‡ºè°ƒè¯•ä¿¡æ¯ï¼Œç±»ä¼¼ `printf()`ã€‚

---

### **9ï¸âƒ£ `loop_rate.sleep();`**
#### **ğŸ”¹ ä½œç”¨**
ç­‰å¾…ä¸€æ®µæ—¶é—´ï¼Œä½¿å¾ªç¯ä¿æŒè®¾å®šçš„ **10Hz è¿è¡Œé¢‘ç‡**ã€‚

---



## **ğŸ”¹ 2. Python ç‰ˆå‘å¸ƒè€…ï¼ˆPublisherï¼‰**
Python ä»£ç é€šå¸¸æ”¾åœ¨ `scripts` ç›®å½•ä¸‹ï¼Œæ¯”å¦‚ `scripts/talker.py`ã€‚å®ç°é€»è¾‘ä¸ºï¼š
1. å¯¼åŒ…
2. åˆå§‹åŒ–ROSèŠ‚ç‚¹
3. åˆ›å»ºå‘å¸ƒè€…å¯¹è±¡
4. ç¼–å†™å‘å¸ƒé€»è¾‘å¹¶å‘å¸ƒæ•°æ®


### **ğŸ“Œ Python ä»£ç ç¤ºä¾‹**
```python
#!/usr/bin/env python3
import rospy
from std_msgs.msg import String

def talker():
    # 1ï¸âƒ£ åˆå§‹åŒ– ROS èŠ‚ç‚¹
    rospy.init_node('talker', anonymous=True)

    # 2ï¸âƒ£ åˆ›å»ºå‘å¸ƒè€…å¯¹è±¡
    pub = rospy.Publisher('chatter', String, queue_size=10)

    # 3ï¸âƒ£ è®¾å®šå‘å¸ƒé¢‘ç‡ï¼ˆ10Hzï¼‰
    rate = rospy.Rate(10)

    count = 0

    # ä¼‘çœ ä¸€ä¼šä¿è¯æ³¨å†ŒæˆåŠŸåå†å‘é€æ•°æ®
    rospy.sleep(3)

    while not rospy.is_shutdown():  # 4ï¸âƒ£ æ£€æµ‹ ROS æ˜¯å¦æ­£åœ¨è¿è¡Œ
        # 5ï¸âƒ£ æ„é€ æ¶ˆæ¯
        msg = "Hello, ROS! Count: {}".format(count)

        # 6ï¸âƒ£ å‘å¸ƒæ¶ˆæ¯
        pub.publish(msg)

        rospy.loginfo("Published: %s", msg)

        # 7ï¸âƒ£ ç­‰å¾…ä¸€æ®µæ—¶é—´ï¼Œä»¥ä¿æŒå‘å¸ƒé¢‘ç‡
        rate.sleep()
        count += 1

if __name__ == '__main__':
    try:
        talker()
    except rospy.ROSInterruptException:
        pass
```

---

### **ğŸ“Œ Python å…³é”®å‡½æ•°è§£æ**
---

### **1ï¸âƒ£ `rospy.init_node('talker', anonymous=True)`**
#### **ğŸ”¹ ä½œç”¨**
åˆå§‹åŒ– ROS èŠ‚ç‚¹ã€‚

#### **ğŸ”¹ å‚æ•°**
| **å‚æ•°** | **ç±»å‹** | **è¯´æ˜** |
|----------|---------|----------|
| `'talker'` | `str` | èŠ‚ç‚¹åç§° |
| `anonymous=True` | `bool` | å…è®¸ ROS ç”Ÿæˆå”¯ä¸€åç§°ï¼Œé˜²æ­¢åŒåå†²çª |

---

### **2ï¸âƒ£ `rospy.Publisher('chatter', String, queue_size=10)`**
#### **ğŸ”¹ ä½œç”¨**
åˆ›å»ºå‘å¸ƒè€…ï¼Œå‘å¸ƒ `String` ç±»å‹çš„æ¶ˆæ¯åˆ° `"chatter"` è¯é¢˜ã€‚

---

### **3ï¸âƒ£ `rospy.Rate(10)`**
#### **ğŸ”¹ ä½œç”¨**
è®¾å®š **10Hz** è¿è¡Œé¢‘ç‡ã€‚

---

### **4ï¸âƒ£ `while not rospy.is_shutdown():`**
#### **ğŸ”¹ ä½œç”¨**
æ£€æŸ¥ **ROS æ˜¯å¦åœ¨è¿è¡Œ**ï¼Œå¦‚æœ `Ctrl+C` ç»ˆæ­¢ç¨‹åºï¼Œå¾ªç¯ä¼šè‡ªåŠ¨åœæ­¢ã€‚

---

### **5ï¸âƒ£ `msg = "Hello, ROS! Count: {}".format(count)`**
#### **ğŸ”¹ ä½œç”¨**
åˆ›å»ºæ¶ˆæ¯ã€‚

---

### **6ï¸âƒ£ `pub.publish(msg)`**
#### **ğŸ”¹ ä½œç”¨**
å‘å¸ƒæ¶ˆæ¯ã€‚

---

### **7ï¸âƒ£ `rospy.loginfo("Published: %s", msg)`**
#### **ğŸ”¹ ä½œç”¨**
æ‰“å°æ—¥å¿—ã€‚

---

### **8ï¸âƒ£ `rate.sleep()`**
#### **ğŸ”¹ ä½œç”¨**
ç­‰å¾…ï¼Œä»¥ä¿æŒ **10Hz** å‘å¸ƒé€Ÿç‡ã€‚

---

## **ğŸ”¹ 3. C++ vs Python çš„åŒºåˆ«**
| **ç‰¹æ€§** | **C++ ç‰ˆ** | **Python ç‰ˆ** |
|----------|----------|----------|
| è¿è¡Œé€Ÿåº¦ | **å¿«**ï¼ˆç¼–è¯‘åæ‰§è¡Œï¼‰ | **æ…¢**ï¼ˆè§£é‡Šæ‰§è¡Œï¼‰ |
| ä»£ç ç®€æ´åº¦ | ä»£ç è¾ƒå¤šï¼Œç»“æ„å¤æ‚ | ä»£ç æ›´ç®€æ´ï¼Œæ˜“è¯» |
| é€‚ç”¨åœºæ™¯ | **é«˜æ€§èƒ½ã€å®æ—¶æ€§å¼º**ï¼ˆå¦‚æœºå™¨äººæ§åˆ¶ï¼‰ | **å¼€å‘æ•ˆç‡é«˜**ï¼ˆå¦‚æ•°æ®å¤„ç†ï¼‰ |
| è¯­æ³• | éœ€è¦æ‰‹åŠ¨ç®¡ç†å†…å­˜ã€ç±»å‹å®‰å…¨ | åŠ¨æ€è¯­è¨€ï¼Œæ˜“ä¸Šæ‰‹ |

---

## **ğŸ”¹ 4. ç¼–è¯‘ & è¿è¡Œ**
### **âœ… C++ ç¼–è¯‘ & è¿è¡Œ**
```sh
cd ~/catkin_ws
catkin_make  # ç¼–è¯‘
source devel/setup.bash
rosrun your_package talker  # è¿è¡Œ
```

### **âœ… Python è¿è¡Œ**
```sh
cd ~/catkin_ws
source devel/setup.bash
chmod +x scripts/talker.py  # èµ‹äºˆæ‰§è¡Œæƒé™
rosrun your_package talker.py  # è¿è¡Œ
```

---

## **ğŸ”¹ 5. è®¢é˜…è€…å¦‚ä½•æ¥æ”¶æ¶ˆæ¯**
ä½ å¯ä»¥åœ¨**å¦ä¸€ä¸ªç»ˆç«¯**è¿è¡Œ `rostopic echo` æ¥æŸ¥çœ‹å‘å¸ƒçš„æ¶ˆæ¯ï¼š
```sh
rostopic echo /chatter
```

---

## **ğŸ”¹ 6. æ€»ç»“**
- **ROS å‘å¸ƒè€…ï¼ˆPublisherï¼‰** é€šè¿‡ **è¯é¢˜ï¼ˆTopicï¼‰** å‘é€æ¶ˆæ¯ï¼Œä¾›è®¢é˜…è€…æ¥æ”¶ã€‚
- **C++ ç‰ˆæœ¬** ä½¿ç”¨ `ros::Publisher`ï¼Œéœ€è¦ `catkin_make` ç¼–è¯‘ã€‚
- **Python ç‰ˆæœ¬** ä½¿ç”¨ `rospy.Publisher`ï¼Œæ— éœ€ç¼–è¯‘ï¼Œç›´æ¥è¿è¡Œå³å¯ã€‚
- **å¯ä»¥ç”¨ `rostopic echo` æŸ¥çœ‹æ¶ˆæ¯**ï¼Œç¡®ä¿é€šä¿¡æ­£å¸¸ã€‚
