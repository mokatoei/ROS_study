## è®¢é˜…æ–¹å®ç°æ¡†æ¶
1. åŒ…å«å¤´æ–‡ä»¶
2. åˆå§‹åŒ–ROSèŠ‚ç‚¹
3. åˆ›å»ºèŠ‚ç‚¹å¥æŸ„
4. åˆ›å»ºè®¢é˜…è€…å¯¹è±¡
5. å¤„ç†è®¢é˜…åˆ°çš„æ•°æ®
6. è®¾ç½®å¾ªç¯è°ƒç”¨å›è°ƒå‡½æ•°
---

## **ğŸ“Œ ROS è®¢é˜…è€…ï¼ˆSubscriberï¼‰è¯¦è§£**
è®¢é˜…è€…ï¼ˆSubscriberï¼‰æ˜¯ ROS è¯é¢˜é€šä¿¡æœºåˆ¶çš„**æ ¸å¿ƒç»„ä»¶ä¹‹ä¸€**ï¼Œå®ƒç”¨äºç›‘å¬å¹¶å¤„ç†æ¥è‡ªå‘å¸ƒè€…ï¼ˆPublisherï¼‰çš„æ¶ˆæ¯ã€‚

---

# **ğŸ”¹ 1. C++ è®¢é˜…è€…**
### **ğŸ“Œ ä»£ç ç¤ºä¾‹**
```cpp
#include "ros/ros.h"
#include "std_msgs/String.h"

// 1ï¸âƒ£ å›è°ƒå‡½æ•°ï¼Œæ¥æ”¶å¹¶å¤„ç†è®¢é˜…åˆ°çš„æ¶ˆæ¯
void chatterCallback(const std_msgs::String::ConstPtr& msg)
{
    ROS_INFO("Received: %s", msg->data.c_str());
}

int main(int argc, char **argv)
{
    ros::init(argc, argv, "listener");  // 2ï¸âƒ£ åˆå§‹åŒ– ROS èŠ‚ç‚¹
    ros::NodeHandle nh;                // 3ï¸âƒ£ åˆ›å»º ROS å¥æŸ„

    // 4ï¸âƒ£ åˆ›å»ºè®¢é˜…è€…ï¼Œè®¢é˜… "chatter" è¯é¢˜ï¼Œå¹¶æŒ‡å®šå›è°ƒå‡½æ•°
    ros::Subscriber sub = nh.subscribe("chatter", 10, chatterCallback);

    ros::spin();  // 5ï¸âƒ£ è¿›å…¥å¾ªç¯ï¼Œç­‰å¾…å›è°ƒæ‰§è¡Œ
    return 0;
}
```

---

### **ğŸ“Œ C++ å…³é”®å‡½æ•°è§£æ**
---

### **1ï¸âƒ£ `void chatterCallback(const std_msgs::String::ConstPtr& msg)`**
#### **ğŸ”¹ ä½œç”¨**
è¿™æ˜¯ä¸€ä¸ª**å›è°ƒå‡½æ•°**ï¼Œå½“æ”¶åˆ°è¯é¢˜æ¶ˆæ¯æ—¶ï¼ŒROS ä¼šè‡ªåŠ¨è°ƒç”¨æ­¤å‡½æ•°å¤„ç†æ•°æ®ã€‚

#### **ğŸ”¹ å‚æ•°**
| **å‚æ•°** | **ç±»å‹** | **è¯´æ˜** |
|----------|---------|----------|
| `msg` | `std_msgs::String::ConstPtr&` | è®¢é˜…åˆ°çš„ `std_msgs::String` æ¶ˆæ¯æŒ‡é’ˆ |

---

### **2ï¸âƒ£ `ros::init(argc, argv, "listener")`**
#### **ğŸ”¹ ä½œç”¨**
åˆå§‹åŒ– ROS èŠ‚ç‚¹ï¼Œåç§°ä¸º `"listener"`ã€‚

---

### **3ï¸âƒ£ `ros::NodeHandle nh;`**
#### **ğŸ”¹ ä½œç”¨**
åˆ›å»ºèŠ‚ç‚¹å¥æŸ„ **nh**ï¼Œç”¨äºç®¡ç†è®¢é˜…ã€å‘å¸ƒç­‰åŠŸèƒ½ã€‚

---

### **4ï¸âƒ£ `ros::Subscriber sub = nh.subscribe("chatter", 10, chatterCallback);`**
#### **ğŸ”¹ ä½œç”¨**
åˆ›å»ºè®¢é˜…è€…ï¼Œè®¢é˜… `chatter` è¯é¢˜ã€‚

#### **ğŸ”¹ å‚æ•°**
| **å‚æ•°** | **ç±»å‹** | **è¯´æ˜** |
|----------|---------|----------|
| `"chatter"` | `std::string` | è®¢é˜…çš„ ROS è¯é¢˜å |
| `10` | `int` | **æ¶ˆæ¯é˜Ÿåˆ—å¤§å°**ï¼ˆç¼“å­˜ 10 æ¡æ¶ˆæ¯ï¼‰ |
| `chatterCallback` | `function` | å›è°ƒå‡½æ•°ï¼Œå½“æ”¶åˆ°æ¶ˆæ¯æ—¶è‡ªåŠ¨æ‰§è¡Œ |

---

### **5ï¸âƒ£ `ros::spin();`**
#### **ğŸ”¹ ä½œç”¨**
**å¾ªç¯ç­‰å¾…** è®¢é˜…çš„æ¶ˆæ¯ï¼Œå¹¶è°ƒç”¨å›è°ƒå‡½æ•° **chatterCallback()** å¤„ç†æ•°æ®ã€‚

---

# **ğŸ”¹ 2. Python è®¢é˜…è€…**
### **ğŸ“Œ ä»£ç ç¤ºä¾‹**
```python
#!/usr/bin/env python3
import rospy
from std_msgs.msg import String

# 1ï¸âƒ£ å›è°ƒå‡½æ•°ï¼Œæ¥æ”¶å¹¶å¤„ç†è®¢é˜…åˆ°çš„æ¶ˆæ¯
def chatter_callback(msg):
    rospy.loginfo("Received: %s", msg.data)

def listener():
    rospy.init_node('listener', anonymous=True)  # 2ï¸âƒ£ åˆå§‹åŒ– ROS èŠ‚ç‚¹
    rospy.Subscriber("chatter", String, chatter_callback)  # 3ï¸âƒ£ åˆ›å»ºè®¢é˜…è€…

    rospy.spin()  # 4ï¸âƒ£ è¿›å…¥å¾ªç¯ï¼Œç­‰å¾…å›è°ƒæ‰§è¡Œ

if __name__ == '__main__':
    listener()
```

---

### **ğŸ“Œ Python å…³é”®å‡½æ•°è§£æ**
---

### **1ï¸âƒ£ `def chatter_callback(msg):`**
#### **ğŸ”¹ ä½œç”¨**
è®¢é˜…å›è°ƒå‡½æ•°ï¼Œ**å½“æ”¶åˆ°æ¶ˆæ¯æ—¶**ï¼Œè‡ªåŠ¨æ‰§è¡Œè¯¥å‡½æ•°ã€‚

#### **ğŸ”¹ å‚æ•°**
| **å‚æ•°** | **ç±»å‹** | **è¯´æ˜** |
|----------|---------|----------|
| `msg` | `std_msgs.msg.String` | è®¢é˜…çš„æ¶ˆæ¯å¯¹è±¡ |

---

### **2ï¸âƒ£ `rospy.init_node('listener', anonymous=True)`**
#### **ğŸ”¹ ä½œç”¨**
åˆå§‹åŒ– ROS èŠ‚ç‚¹ã€‚

---

### **3ï¸âƒ£ `rospy.Subscriber("chatter", String, chatter_callback)`**
#### **ğŸ”¹ ä½œç”¨**
åˆ›å»ºè®¢é˜…è€…ï¼Œ**ç›‘å¬ "chatter" è¯é¢˜**ã€‚

#### **ğŸ”¹ å‚æ•°**
| **å‚æ•°** | **ç±»å‹** | **è¯´æ˜** |
|----------|---------|----------|
| `"chatter"` | `str` | è®¢é˜…çš„è¯é¢˜åç§° |
| `String` | `msg type` | è®¢é˜…çš„æ¶ˆæ¯ç±»å‹ |
| `chatter_callback` | `function` | å›è°ƒå‡½æ•° |

---

### **4ï¸âƒ£ `rospy.spin()`**
#### **ğŸ”¹ ä½œç”¨**
**å¾ªç¯ç­‰å¾…è®¢é˜…çš„æ¶ˆæ¯**ï¼Œå¹¶è°ƒç”¨å›è°ƒå‡½æ•°å¤„ç†æ•°æ®ã€‚

---

# **ğŸ”¹ 3. è®¢é˜…è€…ï¼ˆSubscriberï¼‰ vs å‘å¸ƒè€…ï¼ˆPublisherï¼‰**
| ç‰¹æ€§ | è®¢é˜…è€…ï¼ˆSubscriberï¼‰ | å‘å¸ƒè€…ï¼ˆPublisherï¼‰ |
|------|------------------|------------------|
| ä½œç”¨ | **æ¥æ”¶** è¯é¢˜æ¶ˆæ¯ | **å‘é€** è¯é¢˜æ¶ˆæ¯ |
| å…³é”®å‡½æ•° | `nh.subscribe()` / `rospy.Subscriber()` | `nh.advertise()` / `rospy.Publisher()` |
| å¤„ç†é€»è¾‘ | **å›è°ƒå‡½æ•°** è‡ªåŠ¨æ‰§è¡Œ | **ä¸»åŠ¨å‘é€** æ¶ˆæ¯ |
| `ros::spin()` | **å¿…é¡»** | **ä¸éœ€è¦**ï¼ˆé™¤éæœ‰è®¢é˜…è€…ï¼‰ |

---

ğŸ“Œ **ç»“è®º**
- **è®¢é˜…è€…ï¼ˆSubscriberï¼‰** ä¸»è¦ç”¨äº**ç›‘å¬å¹¶å¤„ç†æ¶ˆæ¯**ï¼Œå®ƒé€šè¿‡**å›è°ƒå‡½æ•°**è‡ªåŠ¨å¤„ç†æ•°æ®ã€‚
- **`ros::spin()` / `rospy.spin()`** æ˜¯è®¢é˜…è€…ä»£ç çš„æ ¸å¿ƒï¼Œå®ƒè®©èŠ‚ç‚¹ä¿æŒè¿è¡Œå¹¶ç›‘å¬è¯é¢˜æ¶ˆæ¯ã€‚
- **C++ vs Python** çš„ä¸»è¦åŒºåˆ«æ˜¯**API è¯­æ³•**ï¼Œä½†æ ¸å¿ƒåŸç†ä¸€è‡´ã€‚
