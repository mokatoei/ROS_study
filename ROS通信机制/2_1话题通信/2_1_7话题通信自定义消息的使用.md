## **1 é…ç½®vscode**
ä¸ºäº†æ–¹ä¾¿ä»£ç æç¤ºä»¥åŠé¿å…è¯¯æŠ›å¼‚å¸¸ï¼Œ**éœ€è¦å…ˆé…ç½®vscode**ï¼Œ**å°†ç”Ÿæˆçš„headæ–‡ä»¶è·¯å¾„é…ç½®è¿›c_cpp_properties.jsonçš„includepathå±æ€§ä¸­**ã€‚

---

## **2ï¸âƒ£ ä½¿ç”¨è‡ªå®šä¹‰æ¶ˆæ¯**

### **1ï¸âƒ£ è‡ªå®šä¹‰æ¶ˆæ¯çš„ç”Ÿæˆä½ç½®**
ç¼–è¯‘åï¼Œè‡ªå®šä¹‰æ¶ˆæ¯ä¼šè¢«**è½¬æ¢æˆ C++ å’Œ Python ä»£ç **ï¼Œå­˜æ”¾åœ¨ `devel` ç›®å½•ä¸‹ã€‚

#### **ğŸ“ ç¼–è¯‘**
```bash
cd ~/catkin_ws
catkin_make
```

#### **ğŸ“ ç”Ÿæˆçš„æ–‡ä»¶å­˜æ”¾è·¯å¾„**
ç¼–è¯‘å®Œæˆåï¼ŒROS ä¼šè‡ªåŠ¨ç”Ÿæˆå¯¹åº”çš„**C++ å¤´æ–‡ä»¶**å’Œ **Python ä»£ç **ï¼š
- **C++ å¤´æ–‡ä»¶**
  ```plaintext
  ~/catkin_ws/devel/include/my_pkg/Person.h
  ```
- **Python ä»£ç **
  ```plaintext
  ~/catkin_ws/devel/lib/python3/dist-packages/my_pkg/msg/_Person.py
  ```

#### **ğŸ“ æ£€æŸ¥æ¶ˆæ¯æ˜¯å¦æˆåŠŸç”Ÿæˆ**
```bash
rosmsg show my_pkg/Person
```
å¦‚æœèƒ½çœ‹åˆ° `Person.msg` çš„å­—æ®µï¼Œè¯´æ˜æ¶ˆæ¯ç”ŸæˆæˆåŠŸã€‚

---

### **2ï¸âƒ£ åœ¨ C++ èŠ‚ç‚¹ä¸­è°ƒç”¨è‡ªå®šä¹‰æ¶ˆæ¯**
#### **ğŸ“ 2.1 åˆ›å»º `talker.cpp`å’Œ`listener.cpp`**
åœ¨ `my_pkg/src/` ç›®å½•ä¸‹åˆ›å»º `talker.cpp`ï¼š
```cpp
#include "ros/ros.h"
#include "my_pkg/Person.h"

int main(int argc, char **argv) {
    ros::init(argc, argv, "person_publisher");
    ros::NodeHandle nh;

    ros::Publisher person_pub = nh.advertise<my_pkg::Person>("person_info", 10);

    ros::Rate loop_rate(1);
    while (ros::ok()) {
        my_pkg::Person person_msg;
        person_msg.name = "Alice";
        person_msg.age = 25;
        person_msg.height = 1.68;

        ROS_INFO("Publishing: %s, %d, %.2f", person_msg.name.c_str(), person_msg.age, person_msg.height);
        person_pub.publish(person_msg);

        ros::spinOnce();
        loop_rate.sleep();
    }
    return 0;
}
```

``` cpp
#include "ros/ros.h"
#include "my_pkg/Person.h"

void callback(const my_pkg::Person::ConstPtr& msg)
{
    ROS_INFO("Receive Data:name:%S,age:%d,height:%.2f", msg->name.c_str(), msg->age, msg->height);
}

int main(int argc, char *argv[])
{
    ros::init(argc, argv, "listener");
    ros::NodeHandle nh;

    ros::Subscriber sub = ros::subscribe("person_info", 10, callback);

    ros.spin();
    return 0;
}
```


#### **ğŸ“ 2.2 ä¿®æ”¹ `CMakeLists.txt`**
ç¡®ä¿ `CMakeLists.txt` ä¸­**æ·»åŠ äº†ä»¥ä¸‹å†…å®¹**ï¼š
```cmake
# æŸ¥æ‰¾å¹¶åŠ è½½ catkinï¼ˆROS çš„ CMake æ„å»ºç³»ç»Ÿï¼‰å¹¶ æŒ‡å®šéœ€è¦çš„ ROS ç»„ä»¶
find_package(catkin REQUIRED COMPONENTS roscpp std_msgs message_generation)

# å®šä¹‰ä¸€ä¸ªå¯æ‰§è¡Œæ–‡ä»¶ talkerï¼Œå…¶æºä»£ç æ–‡ä»¶ä¸º src/talker.cpp
add_executable(talker src/talker.cpp)

# ç¡®ä¿ talker åœ¨ catkin_make ç”Ÿæˆçš„ä¾èµ–é¡¹ä¹‹åç¼–è¯‘ï¼Œé¿å…æ‰¾ä¸åˆ°å¤´æ–‡ä»¶æˆ–åº“çš„é—®é¢˜ã€‚
# catkin_EXPORTED_TARGETS å˜é‡åŒ…å« æ‰€æœ‰åœ¨ message_generation é‡Œå®šä¹‰çš„æ¶ˆæ¯æˆ–æœåŠ¡ï¼Œå¦‚æœ talker ä¾èµ–äºè‡ªå®šä¹‰æ¶ˆæ¯ï¼Œå®ƒå°±å¿…é¡»ç­‰å¾…æ¶ˆæ¯ç”Ÿæˆå®Œæˆå†ç¼–è¯‘ã€‚
add_dependencies(talker ${catkin_EXPORTED_TARGETS})

# å°† talker è¿™ä¸ªå¯æ‰§è¡Œæ–‡ä»¶ä¸ ROS åº“è¿›è¡Œé“¾æ¥ï¼Œç¡®ä¿å®ƒèƒ½å¤Ÿä½¿ç”¨ roscpp ç›¸å…³åŠŸèƒ½ï¼Œæ¯”å¦‚ ros::Publisherã€ros::NodeHandle ç­‰ã€‚
target_link_libraries(talker ${catkin_LIBRARIES})
```

#### **ğŸ“ 2.3 é‡æ–°ç¼–è¯‘**
```bash
cd ~/catkin_ws
catkin_make
```

#### **ğŸ“ 2.4 è¿è¡Œ C++ å‘å¸ƒè€…**
```bash
source devel/setup.bash
rosrun my_pkg talker
```

---

### **3ï¸âƒ£ åœ¨ Python èŠ‚ç‚¹ä¸­è°ƒç”¨è‡ªå®šä¹‰æ¶ˆæ¯**
#### **ğŸ“ 3.1 åˆ›å»º `talker.py`**
åœ¨ `my_pkg/scripts/` ç›®å½•ä¸‹åˆ›å»º `talker.py`å’Œ`listener.py`ï¼š
```python
#!/usr/bin/env python3
import rospy
from my_msgs.msg import Person

rospy.init_node("person_publisher")
pub = rospy.Publisher("person_info", Person, queue_size=10)

rate = rospy.Rate(1)
while not rospy.is_shutdown():
    msg = Person()
    msg.name = "Tom"
    msg.age = 25
    msg.height = 1.75
    
    pub.publish(msg)
    rospy.loginfo("Published Person: %s, Age: %d, Height: %.2f", msg.name, msg.age, msg.height)
    
    rate.sleep()
```

``` python
#!/usr/bin/env python3
import rospy
from my_pkg.msg import Person  # å¯¼å…¥è‡ªå®šä¹‰æ¶ˆæ¯

def person_callback(msg):
    rospy.loginfo(f"Received: Name={msg.name}, Age={msg.age}, Height={msg.height:.2f}")

def listener():
    rospy.init_node('person_listener', anonymous=True)
    rospy.Subscriber("person_info", Person, person_callback)
    rospy.spin()

if __name__ == "__main__":
    listener()

```

#### **ğŸ“ 3.2 æ·»åŠ æ‰§è¡Œæƒé™**
```bash
chmod +x ~/catkin_ws/src/my_pkg/scripts/talker.py
```

#### **ğŸ“ 3.3 è¿è¡Œ Python è®¢é˜…è€…**
```bash
source devel/setup.bash
rosrun my_pkg talker.py
```

---

### **4ï¸âƒ£ è¿è¡Œæµ‹è¯•**
#### **ğŸ“ 4.1 å¯åŠ¨ ROS**
```bash
roscore
```

#### **ğŸ“ 4.2 è¿è¡Œå‘å¸ƒè€…**
```bash
rosrun my_pkg talker
```

#### **ğŸ“ 4.3 è¿è¡Œè®¢é˜…è€…**
```bash
rosrun my_pkg talker.py
```

#### **ğŸ“ 4.4 æŸ¥çœ‹è¯é¢˜æ•°æ®**
```bash
rostopic echo /person_info
```
---

## **ğŸ“Œ ROS **è‡ªå®šä¹‰æ¶ˆæ¯** çš„å®Œæ•´æµç¨‹**
| æ­¥éª¤ | å‘½ä»¤ |
|------|------|
| åˆ›å»ºåŠŸèƒ½åŒ… | `catkin_create_pkg my_msgs std_msgs rospy roscpp` |
| åˆ›å»º `msg/Person.msg` | `echo -e "string name\nint32 age\nfloat32 height" > msg/Person.msg` |
| ä¿®æ”¹ `CMakeLists.txt` | æ·»åŠ  `add_message_files()` å’Œ `generate_messages()` |
| ä¿®æ”¹ `package.xml` | æ·»åŠ  `<build_depend>message_generation</build_depend>` |
| ç¼–è¯‘ | `catkin_make` |
| è¿è¡Œå‘å¸ƒè€… | `rosrun my_msgs talker` |
| è¿è¡Œè®¢é˜…è€… | `rosrun my_msgs listener` |

---

### **5ï¸ å°ç»“**
1. **è‡ªå®šä¹‰æ¶ˆæ¯ç”Ÿæˆçš„ä½ç½®**
   - **C++ å¤´æ–‡ä»¶**ï¼š`devel/include/my_pkg/Person.h`
   - **Python ä»£ç **ï¼š`devel/lib/python3/dist-packages/my_pkg/msg/_Person.py`
2. **C++ ä»£ç **
   - é€šè¿‡ `#include "my_pkg/Person.h"` å¼•å…¥è‡ªå®šä¹‰æ¶ˆæ¯
   - `ros::Publisher` å‘å¸ƒ `Person` æ¶ˆæ¯
3. **Python ä»£ç **
   - é€šè¿‡ `from my_pkg.msg import Person` å¼•å…¥è‡ªå®šä¹‰æ¶ˆæ¯
   - `rospy.Subscriber` è®¢é˜… `Person` æ¶ˆæ¯
4. **è¿è¡Œæ­¥éª¤**
   - **ç¼–è¯‘**ï¼š`catkin_make`
   - **å¯åŠ¨ ROS**ï¼š`roscore`
   - **è¿è¡Œå‘å¸ƒè€…**ï¼š`rosrun my_pkg talker`
   - **è¿è¡Œè®¢é˜…è€…**ï¼š`rosrun my_pkg listener.py`
   - **æ£€æŸ¥è¯é¢˜**ï¼š`rostopic echo /person_info`

